# System Analysis & Documentation Configuration

<!-- このセクションがOFFの場合、以下の内容は無視してください -->

## システム解析・ドキュメント化機能

この設定はmode_setting.mdの動作速度設定に連動します：
- **高速モード (STATUS: ON)**: 要点抽出と概要分析を優先
- **慎重モード (STATUS: ON)**: 詳細分析と網羅的検証を優先

### 🚀 高速モード時の動作
- 要点を素早く抽出
- 概要レベルの分析
- 簡潔な結果出力
- 主要コンポーネントのみ分析

### 🔍 慎重モード時の動作
- 深い分析と複数角度からの検証
- 詳細なレポート生成
- 段階的な確認プロセス
- 網羅的な検証と文書化

### 1. コードベース分析
#### 初期分析フェーズ
- プロジェクト構造の把握
- 主要ディレクトリとファイルのマッピング
- 依存関係の解析（package.json, requirements.txt等）
- 使用技術スタックの特定

#### 深層分析フェーズ
- エントリーポイントの特定
- データフローの追跡
- 主要コンポーネント間の関係性
- 設定ファイルとその影響範囲

### 2. アーキテクチャドキュメント生成
#### 構造図の作成
```
プロジェクト名/
├── 概要説明
├── アーキテクチャ層
│   ├── プレゼンテーション層
│   ├── ビジネスロジック層
│   └── データアクセス層
└── 外部連携
```

#### コンポーネント相関図
- Mermaid形式での図表生成
- 主要モジュール間の依存関係
- データフローの可視化

### 3. コード解析レポート
#### 機能別ドキュメント
- 各機能の目的と責務
- 入出力の仕様
- エラーハンドリング方法
- 使用例とサンプルコード

#### セキュリティ分析
- 認証・認可の仕組み
- データ保護の実装
- 潜在的な脆弱性の指摘（改善提案付き）

### 4. API/インターフェース仕様書
#### エンドポイント詳細
```markdown
### POST /api/users
**概要**: 新規ユーザー作成
**認証**: 必要（Bearer Token）
**リクエスト**:
\`\`\`json
{
  "name": "string",
  "email": "string"
}
\`\`\`
**レスポンス**: ...
```

### 5. データベース設計書
- テーブル定義書
- ER図（Mermaid形式）
- インデックス戦略
- データ整合性ルール

### 6. 運用・保守ドキュメント
#### デプロイメント手順
- 環境別設定
- ビルド・デプロイプロセス
- ロールバック手順

#### トラブルシューティング
- よくある問題と解決策
- ログの見方
- パフォーマンスチューニング

### 7. 分析出力形式
#### 標準フォーマット
- Markdown形式での出力
- 目次の自動生成（[TOC]タグ使用）
- コードブロックは言語指定付き
- 図表はMermaidまたはASCIIアート

#### レポート構成
1. エグゼクティブサマリー
2. システム概要
3. 技術詳細
4. 運用ガイド
5. 付録（用語集、参考資料）

### 8. 分析時の注意事項
- 既存のドキュメントとの整合性確認
- 機密情報の取り扱い（マスキング）
- バージョン管理システムとの連携
- 更新履歴の記録

### 9. 分析実行モード

#### ワンストップ分析モード（推奨）
最初に全ての確認事項を一度に質問し、その後は中断なく分析を完了：

**初期質問（一括）**:
```
📋 システム解析を開始します。以下の質問にお答えください：

1. 解析対象のディレクトリ/プロジェクト名：
2. 重点的に分析したい領域：
   [ ] 全体アーキテクチャ
   [ ] API仕様
   [ ] データベース設計
   [ ] セキュリティ
   [ ] パフォーマンス
   [ ] その他（具体的に：）
3. 出力形式：
   [ ] 簡潔版（概要のみ）
   [ ] 標準版（推奨）
   [ ] 詳細版（全項目）
4. 既存ドキュメントの有無：
   [ ] なし
   [ ] あり（場所：）
5. 特別な考慮事項：
   （機密情報のマスキング、特定のフレームワーク等）
```

**実行フロー**:
1. 上記情報を受け取り次第、確認なしで解析開始
2. 進捗は最終結果のみ報告（途中経過は内部処理）
3. エラー時のみ停止、それ以外は完走
4. 最終成果物を一括出力

#### インタラクティブ分析モード（オプション）
従来通り、ユーザーとの対話により段階的に実施：
1. 「どの部分を重点的に分析しますか？」
2. 「どのような形式でドキュメントを出力しますか？」
3. 「既存のドキュメントはありますか？」
4. 分析進捗の定期報告

#### モード選択
- デフォルト：ワンストップ分析モード
- 明示的に「インタラクティブモードで」と指定された場合のみ対話型